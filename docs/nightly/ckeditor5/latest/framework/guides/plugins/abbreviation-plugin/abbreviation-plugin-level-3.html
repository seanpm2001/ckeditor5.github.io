<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Improving accessibility and adding a command - CKEditor 5 Documentation</title>
    <meta name="description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:card" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:site" content="@ckeditor">
    <meta name="x-generated-at" content="Fri Jan 06 2023 03:34:24 GMT+0000 (Coordinated Universal Time)">
    <meta property="og:title" content="Improving accessibility and adding a command - CKEditor 5 Documentation">
    <meta property="og:description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/plugins/abbreviation-plugin/abbreviation-plugin-level-3.html">
    <meta property="DC.language" content="en">
    <meta property="DC.publisher" content="CKSource">
    <meta property="DC.creator" content="CKEditor">
    <meta property="DC.title" content="Improving accessibility and adding a command - CKEditor 5 Documentation">
    <meta property="DC.format" content="text/html">
    <meta property="DC.type" content="Text">
    <meta property="DC.description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <link rel="canonical" href="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/plugins/abbreviation-plugin/abbreviation-plugin-level-3.html">
    <link rel="icon" type="image/png" href="../../../../assets/img/favicons/16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="../../../../assets/img/favicons/32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../../assets/img/favicons/96x96.png" sizes="96x96">
    <link rel="apple-touch-icon" type="image/png" href="../../../../assets/img/favicons/200x200.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
    <link rel="stylesheet" href="../../../../../../assets/2.2.0/css/styles.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../../../assets/styles.css" type="text/css">
    <link rel="stylesheet" href="../../../../snippets/framework/abbreviation-level-3/snippet.css" type="text/css" data-cke="true">
    <link rel="stylesheet" href="../../../../assets/snippet-styles.css" type="text/css" data-cke="true">
    <link rel="stylesheet" href="../../../../snippets/assets.css" type="text/css" data-cke="true">
    <script>if ( ["ckeditor5.github.io"].indexOf( location.hostname ) !== -1 ) {
      	function pageView() {
      		ga( 'send', 'pageview', location.pathname + location.search + location.hash );
      	}
      
      	(function( i, s, o, g, r, a, m ) {
      		i[ 'GoogleAnalyticsObject' ] = r;
      		i[ r ] = i[ r ] || function() {
      				(i[ r ].q = i[ r ].q || []).push( arguments )
      			}, i[ r ].l = 1 * new Date();
      		a = s.createElement( o ),
      			m = s.getElementsByTagName( o )[ 0 ];
      		a.async = 1;
      		a.src = g;
      		m.parentNode.insertBefore( a, m )
      	})( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
      
      	ga( 'create', {"trackingId":"UA-271067-19","cookieDomain":"ckeditor5.github.io"} );
      
      	pageView();
      
      	window.addEventListener( 'hashchange', pageView );
      }
    </script>
  <meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <header class="top" data-project="ckeditor5">
      <div class="header__main">
        <div class="header__main-rwd-button"><a href="#"><span></span><span></span><span></span></a></div>
        <div class="header__main-title"><a class="header__main-title-home" href="../../../../../../index.html">CKEditor Ecosystem Documentation</a></div>
        <div class="top__search">
          <input class="top__search__box" type="text" id="docsearch_input" placeholder="Search in CKEditor 5">
          <div class="top__search__button"><img src="../../../../../../assets/2.2.0/img/loupe.svg" alt="Search"></div>
        </div>
      </div>
      <div class="header__sub">
        <ul class="top__menu">
          <li class="top__menu-project-logo"><a href="../../../../index.html">CKEditor 5</a></li>
          <li><a href="../../../../installation/index.html">Getting started</a></li>
          <li><a href="../../../../features/index.html">Features</a></li>
          <li><a href="../../../../examples/index.html">Examples</a></li>
          <li><a href="../../../../updating/index.html">Updating</a></li>
          <li><a href="../../../../support/index.html">Support</a></li>
          <li><a class="top__menu__item--active" href="../../../index.html">Framework</a></li>
          <li><a class="top__menu__api" href="../../../../api/index.html">API</a></li>
          <li><a class="top__menu-github-link" href="https://github.com/ckeditor/ckeditor5" target="_blank" title="CKEditor 5 on GitHub."><svg viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li>
        </ul>
      </div>
      <div class="header__menu-rwd">
        <ul class="header__menu-rwd__projects">
          <li data-project="ckeditor5"><a href="../../../../../latest/index.html">CKEditor 5</a>
            <ul class="tree header__menu-rwd__projects-pages">
              <li data-group="installation"><a href="../../../../installation/index.html">Getting started</a>
              </li>
              <li data-group="features"><a href="../../../../features/index.html">Features</a>
              </li>
              <li data-group="examples"><a href="../../../../examples/index.html">Examples</a>
              </li>
              <li data-group="updating"><a href="../../../../updating/index.html">Updating</a>
              </li>
              <li data-group="support"><a href="../../../../support/index.html">Support</a>
              </li>
              <li data-group="framework"><a href="../../../index.html">Framework</a>
                <ul class="header__menu-rwd__projects-subpages">
                          <li><a href="../../../index.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span>
                              </div></a></li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Guides</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                  <li><a href="../../quick-start.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Quick start</span>
                                      </div></a></li>
                                  <li><a href="../../development-tools.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Development tools</span>
                                      </div></a></li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Architecture</span>
                                    </div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="../../architecture/intro.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Introduction</span>
                                              </div></a></li>
                                          <li><a href="../../architecture/core-editor-architecture.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Core editor architecture</span>
                                              </div></a></li>
                                          <li><a href="../../architecture/editing-engine.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Editing engine</span>
                                              </div></a></li>
                                          <li><a href="../../architecture/ui-library.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">UI library</span>
                                              </div></a></li>
                                    </ul>
                                  </li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Developing custom plugins</span>
                                    </div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="../creating-simple-plugin-timestamp.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Creating a basic plugin</span>
                                              </div></a></li>
                                          <li>
                                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Creating an abbreviation plugin</span>
                                            </div>
                                            <ul class="tree__item-nested-list">
                                                  <li><a href="abbreviation-plugin-level-1.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Creating a toolbar button</span>
                                                      </div></a></li>
                                                  <li><a href="abbreviation-plugin-level-2.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Getting user input with a custom UI</span>
                                                      </div></a></li>
                                                  <li><a href="">
                                                      <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Improving accessibility and adding a command</span>
                                                      </div></a></li>
                                            </ul>
                                          </li>
                                          <li>
                                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Package Generator</span>
                                            </div>
                                            <ul class="tree__item-nested-list">
                                                  <li><a href="../package-generator/using-package-generator.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Using package generator</span>
                                                      </div></a></li>
                                                  <li><a href="../package-generator/javascript-package.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">JavaScript package</span>
                                                      </div></a></li>
                                                  <li><a href="../package-generator/typescript-package.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">TypeScript package</span>
                                                      </div></a></li>
                                            </ul>
                                          </li>
                                    </ul>
                                  </li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Advanced tutorials</span>
                                    </div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="../../tutorials/implementing-a-block-widget.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Implementing a block widget</span>
                                              </div></a></li>
                                          <li><a href="../../tutorials/implementing-an-inline-widget.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Implementing an inline widget</span>
                                              </div></a></li>
                                          <li><a href="../../tutorials/data-from-external-source.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Data from external source</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                              </div></a></li>
                                          <li><a href="../../tutorials/using-react-in-a-widget.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Using a React component in a widget</span>
                                              </div></a></li>
                                    </ul>
                                  </li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Deep dive</span>
                                    </div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="../../deep-dive/clipboard.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Clipboard</span>
                                              </div></a></li>
                                          <li><a href="../../deep-dive/upload-adapter.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Custom upload adapter</span>
                                              </div></a></li>
                                          <li><a href="../../deep-dive/event-system.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Event system</span>
                                              </div></a></li>
                                          <li><a href="../../deep-dive/observables.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Observables</span>
                                              </div></a></li>
                                          <li><a href="../../deep-dive/schema.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Schema</span>
                                              </div></a></li>
                                          <li>
                                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Conversion</span>
                                            </div>
                                            <ul class="tree__item-nested-list">
                                                  <li><a href="../../deep-dive/conversion/intro.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Introduction</span>
                                                      </div></a></li>
                                                  <li><a href="../../deep-dive/conversion/downcast.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Model to view (downcast)</span>
                                                      </div></a></li>
                                                  <li><a href="../../deep-dive/conversion/upcast.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">View to model (upcast)</span>
                                                      </div></a></li>
                                                  <li>
                                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Conversion helpers</span>
                                                    </div>
                                                    <ul class="tree__item-nested-list">
                                                          <li><a href="../../deep-dive/conversion/helpers/intro.html">
                                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Introduction</span>
                                                              </div></a></li>
                                                          <li><a href="../../deep-dive/conversion/helpers/downcast.html">
                                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Downcast helpers</span>
                                                              </div></a></li>
                                                          <li><a href="../../deep-dive/conversion/helpers/upcast.html">
                                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Upcast helpers</span>
                                                              </div></a></li>
                                                    </ul>
                                                  </li>
                                            </ul>
                                          </li>
                                          <li>
                                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">User interface</span>
                                            </div>
                                            <ul class="tree__item-nested-list">
                                                  <li><a href="../../deep-dive/ui/focus-tracking.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Focus tracking</span>
                                                      </div></a></li>
                                                  <li><a href="../../deep-dive/ui/widget-internals.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Widget internals</span>
                                                      </div></a></li>
                                                  <li><a href="../../deep-dive/ui/theme-customization.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Theme customization</span>
                                                      </div></a></li>
                                                  <li><a href="../../deep-dive/ui/external-ui.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Third–party UI</span>
                                                      </div></a></li>
                                                  <li><a href="../../deep-dive/ui/document-editor.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Document editor</span>
                                                      </div></a></li>
                                                  <li><a href="../../deep-dive/ui/custom-editor-creator.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Creating custom editor</span>
                                                      </div></a></li>
                                                  <li><a href="../../deep-dive/ui/localization.html">
                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Localization</span>
                                                      </div></a></li>
                                            </ul>
                                          </li>
                                    </ul>
                                  </li>
                                  <li>
                                    <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Contributing</span>
                                    </div>
                                    <ul class="tree__item-nested-list">
                                          <li><a href="../../contributing/contributing.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Contributing</span>
                                              </div></a></li>
                                          <li><a href="../../contributing/development-environment.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Development environment</span>
                                              </div></a></li>
                                          <li><a href="../../contributing/testing-environment.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Testing environment</span>
                                              </div></a></li>
                                          <li><a href="../../contributing/code-style.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Code style</span>
                                              </div></a></li>
                                          <li><a href="../../contributing/package-metadata.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Package metadata</span>
                                              </div></a></li>
                                          <li><a href="../../contributing/git-commit-message-convention.html">
                                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Git commit message convention</span>
                                              </div></a></li>
                                    </ul>
                                  </li>
                            </ul>
                          </li>
                </ul>
              </li>
              <li data-group="api-reference"><a href="../../../../api/index.html">API</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </header>
    <main class="main">
      <section class="main__content formatted">
        <div class="main__content-inner">
          <div class="github-contrib"><a href="https://github.com/ckeditor/ckeditor5/blob/master/docs/framework/guides/abbreviation-plugin-tutorial/abbreviation-plugin-level-3.md" title="Contribute to this guide"><img src="../../../../../../assets/2.2.0/img/edit.svg" alt="Contribute to this guide"></a>
          </div>
          <div class="rwd-breadcrumbs"><a href="../../../../../../index.html">Home</a><span class="rwd-breadcrumbs__separator">/</span><a href="../../../../index.html">CKEditor 5</a><span class="rwd-breadcrumbs__separator">/</span><a href="../../../index.html">Framework</a>
          </div>
          <h1 class="main__content-title"><img src="../../../../../../assets/2.2.0/img/book.svg" alt="guide">Improving accessibility and adding a command
          </h1><nav class="secondary-navigation"><h3>Table of contents</h3><ol><li><a href="#improving-accessibility">Improving accessibility</a><ol><li><a href="#adding-a-keystroke-handler-and-a-focus-tracker">Adding a keystroke handler and a focus tracker</a></li><li><a href="#adding-a-focus-cycler">Adding a focus cycler</a></li></ol></li><li><a href="#improving-the-ui-functionalities">Improving the UI functionalities</a></li><li><a href="#adding-a-command">Adding a command</a><ol><li><a href="#creating-a-command">Creating a command</a></li><li><a href="#refreshing-the-state">Refreshing the state</a></li><li><a href="#improving-the-execute-method">Improving the execute() method</a></li></ol></li><li><a href="#demo">Demo</a></li><li><a href="#final-code">Final code</a></li></ol></nav>
<p>You made it to the final part of the abbreviation plugin tutorial. In this part, we will improve accessibility of our plugin. We will also work on a command, which will additionally grab the text from user’s selection, and insert it into our form. And more!</p>
<p>We pick up where we left off in the <a href="abbreviation-plugin-level-2.html">second part</a>, so make sure you finished it, or grab our <a href="https://github.com/ckeditor/ckeditor5-tutorials-examples/tree/main/abbreviation-plugin/part-2">starter files for this part</a>.</p>
<p>If you want to see the final product of this tutorial before you plunge in, check out the <a href="#demo">live demo</a>.</p>
<h2 id="improving-accessibility"><a class="headerlink" href="#improving-accessibility">#</a> Improving accessibility</h2>
<p>First, we make our plugin accessible for users who rely on keyboards for navigation. We want to ensure that pressing <kbd>Tab</kbd> and <kbd>Shift</kbd> + <kbd>Tab</kbd> will move focus around in the form view, and pressing <code>esc</code> will close it.</p>
<div class="info-box notice"><p>In order to improve the accessibility of the plugin, it is important to understand how keystroke and focus management works in the CKEditor 5 framework. We recommend you <a href="../../architecture/ui-library.html#keystrokes-and-focus-management">read up on the basics</a>, or do a <a href="../../deep-dive/ui/focus-tracking.html">deep dive into focus tracking</a>.</p></div>
<p>We have some ready-to-use options to help us out – the <a href="../../deep-dive/ui/focus-tracking.html#using-the-keystrokehandler-class">KeystrokeHandler</a>, <a href="../../deep-dive/ui/focus-tracking.html#using-the-focustracker-class">FocusTracker</a>, and <a href="../../deep-dive/ui/focus-tracking.html#using-the-focuscycler-class">FocusCycler</a> helper classes.</p>
<h3 id="adding-a-keystroke-handler-and-a-focus-tracker"><a class="headerlink" href="#adding-a-keystroke-handler-and-a-focus-tracker">#</a> Adding a keystroke handler and a focus tracker</h3>
<p>We start by importing the <code>KeystrokeHandler</code> and <code>FocusTracker</code> classes into our form view, and creating their new instances in the <code>constructor()</code>.</p>
<p>Now, in the <code>render()</code> method, we add each element of our <code>childViews</code> view collection to the <code>focusTracker</code>. There, we can also start listening for the keystrokes coming from the rendered view element.</p>
<p>Finally let’s add the <code>destroy()</code> method, and destroy both the focus tracker and the keystroke handler. It will ensure that when the user kills the editor, our helpers “die” too, preventing any memory leaks.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationview.js

import {
    View,
    LabeledFieldView,
    createLabeledInputText,
    ButtonView,
    submitHandler,
} from '@ckeditor/ckeditor5-ui';
import { FocusTracker, KeystrokeHandler } from '@ckeditor/ckeditor5-utils'; // ADDED
import { icons } from '@ckeditor/ckeditor5-core';

export default class FormView extends View {
    constructor( locale ) {
        // ...

        this.focusTracker = new FocusTracker();
        this.keystrokes = new KeystrokeHandler();

        // ...
    }

    render() {
        // ...

        this.childViews._items.forEach( view =&gt; {
            // Register the view in the focus tracker.
            this.focusTracker.add( view.element );
        } );

        // Start listening for the keystrokes coming from #element.
        this.keystrokes.listenTo( this.element );
    }

    destroy() {
        super.destroy();

        this.focusTracker.destroy();
        this.keystrokes.destroy();
    }

    // ...
}
</code></pre>
<h3 id="adding-a-focus-cycler"><a class="headerlink" href="#adding-a-focus-cycler">#</a> Adding a focus cycler</h3>
<p>The <code>FocusCycler</code> will allow the user to navigate through all the children of our form view, cycling over them. Check how our navigation works now in our form view – we can use <kbd>Tab</kbd> to move from the first input field to the second, but then the focus leaves the form, and the editor itself. Let’s fix that.</p>
<p>We import the <code>FocusCycler</code> class, and create its instance in the form view <code>constructor()</code>. We need to pass an object with focusables (so our <code>childViews</code> collection), the focus tracker, the keystroke handler, and the actions connected to different keystrokes.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationview.js

import {
    View,
    LabeledFieldView,
    createLabeledInputText,
    ButtonView,
    submitHandler,
    FocusCycler																// ADDED
} from '@ckeditor/ckeditor5-ui';
import { FocusTracker, KeystrokeHandler } from '@ckeditor/ckeditor5-utils';
import { icons } from '@ckeditor/ckeditor5-core';

export default class FormView extends View {
    constructor( locale ) {

        // ...

        this._focusCycler = new FocusCycler( {
            focusables: this.childViews,
            focusTracker: this.focusTracker,
            keystrokeHandler: this.keystrokes,
            actions: {
                // Navigate form fields backwards using the Shift + Tab keystroke.
                focusPrevious: 'shift + tab',

                // Navigate form fields forwards using the Tab key.
                focusNext: 'tab'
            }
        } );

        this.setTemplate( {
            // ...
        } );
    }

    // ...
}
</code></pre>
<p>Now we can add the <kbd>Esc</kbd> button handler in our <code>_createFromView()</code> function, which will hide the UI and fire off <code>cancel</code> on the form.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationui.js
// ...

export default class AbbreviationUI extends Plugin {
    // ...

    _createFormView() {
        // ...

        // Close the panel on esc key press when the form has focus.
        formView.keystrokes.set( 'Esc', ( data, cancel ) =&gt; {
            this._hideUI();
            cancel();
        } );

        return formView;
    }

    // ...
}
</code></pre>
<p>We are done with improving accessibility for keyboard-only users. Try it out yourself by pressing <kbd>Tab</kbd>, <kbd>Shift</kbd> + <kbd>Tab</kbd>, and <kbd>Esc</kbd> in the form.</p>
<h2 id="improving-the-ui-functionalities"><a class="headerlink" href="#improving-the-ui-functionalities">#</a> Improving the UI functionalities</h2>
<p>When the user selects a range (a letter, a word, or a whole document fragment) and presses the abbreviation button, they might expect that their selected text appears automatically in the abbreviation input field. Let’s add this functionality to our form.</p>
<div class="info-box notice"><p>As we will be working with user’s selection in the document, it is important to understand what exactly does it mean in the editor’s model. Read our introduction to <a href="../../architecture/editing-engine.html#positions-ranges-and-selections">positions, ranges and selections</a> to expand your knowledge in the field.</p></div>
<p>In order to display the text from the user’s selection in the form field, we need to first grab and concatenate all text from the selected range. If the user selects a couple of paragraphs, a heading, and an image, we need to go through all the nodes, and use only the ones containing text.</p>
<p>Let’s create a helper <code>getRangeText()</code> function in a separate <code>/utils.js</code> file. It will grab all items from a range using its <code>getItems()</code> method. Then, it will concatenate all text from the <a href="../../../../api/module_engine_model_text-Text.html"><code>text</code></a> and <a href="../../../../api/module_engine_model_textproxy-TextProxy.html"><code>textProxy</code></a> nodes, and skip all the others.</p>
<pre class="highlight"><code class="js">// abbreviation/utils.js

// A helper function that retrieves and concatenates all text within the model range.
export default function getRangeText( range ) {
    return Array.from( range.getItems() ).reduce( ( rangeText, node ) =&gt; {
        if ( !( node.is( 'text' ) || node.is( 'textProxy' ) ) ) {
            return rangeText;
        }

        return rangeText + node.data;
    }, '' );
}

</code></pre>
<p>Now, in <code>AbbreviationUI</code> we can adjust the <code>_showUI()</code> method to display the selected text in the abbreviation input field. We import <code>getRangeText</code> and pass the first range in the selection (using the <code>getFirstRange()</code> method) as an argument.</p>
<p>We will also disable the input field when the selection is not collapsed, because it would be hard to change the text of the abbreviation if the selection spans multiple paragraphs.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationui.js
// ...
import getRangeText from './utils.js';

export default class AbbreviationUI extends Plugin {
    // ...

    _showUI() {
        const selection = this.editor.model.document.selection;

        this._balloon.add( {
            view: this.formView,
            position: this._getBalloonPositionData()
        } );

        // Disable the input when the selection is not collapsed.
        this.formView.abbrInputView.isEnabled = selection.getFirstRange().isCollapsed;

        const selectedText = getRangeText( selection.getFirstRange() );
        this.formView.abbrInputView.fieldView.value = selectedText;
        this.formView.titleInputView.fieldView.value = '';

        this.formView.focus();
    }

    // ...
}
</code></pre>
<p>Since we are disabling the first input field in some cases, let’s update the <code>focus()</code> method in our form view accordingly.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationview.js
// ...

export default class FormView extends View {
    // ...

    focus() {
        // If the abbreviation text field is enabled, focus it.
        if ( this.abbrInputView.isEnabled ) {
            this.abbrInputView.focus();
        }
        // Focus the abbreviation title field if the former is disabled.
        else {
            this.titleInputView.focus();
        }
    }
    // ...
}
</code></pre>
<p>Our new functionality should work now, check it out yourself! It does not recognize whether the selected text is an abbreviation already, so if you select “WYSIWYG”, the full title does not yet appear in the title input field. We will change it in the next steps.</p>
<h2 id="adding-a-command"><a class="headerlink" href="#adding-a-command">#</a> Adding a command</h2>
<p>Our plugin does what we want it to do, so why complicate things by adding a command? Well, a command not only executes an action, but also automatically reacts when any changes are applied to the model.</p>
<div class="info-box notice"><p>A command in CKEditor 5 is a combination of an action and a state. The state of the command gets refreshed whenever anything changes in the model. We highly recommend <a href="../../architecture/core-editor-architecture.html#commands">reading about commands</a> before we move on.</p></div>
<p>When the user makes a selection in the editor, the command will automatically check if there is an abbreviation there. It will also ensure that the command is only enabled where the “abbreviation” attribute can be set on the current model selection (not on images, for instance).</p>
<h3 id="creating-a-command"><a class="headerlink" href="#creating-a-command">#</a> Creating a command</h3>
<p>Let’s start by creating the command, and moving the existing action logic there.</p>
<p>In the <code>/abbreviationcommand.js</code> file, we import the <code>Command</code> class and create its instance.</p>
<p>We will start by simply moving there the action we already created for <code>submit</code> in our <code>_createFormView()</code> method, passing the title and the abbreviation text into the command’s <code>execute()</code> method.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationcommand.js

import Command from '@ckeditor/ckeditor5-core/src/command';

export default class AbbreviationCommand extends Command {
    execute( { title, abbr } ) {
        const model = this.editor.model;

        model.change( writer =&gt; {
            model.insertContent(
                writer.createText( abbr, { abbreviation: title } )
            );
        } );

    }
}
</code></pre>
<p>Now, let’s initialize our <code>AbbreviationCommand</code>, by adding it to the list of editor’s commands in <code>AbbreviationEditing</code>. We will also pass a name there, that we will use to call our command.</p>
<pre class="highlight"><code class="js">// abreviation/abbreviationediting.js

import Plugin from '@ckeditor/ckeditor5-core/src/plugin';
import AbbreviationCommand from './abbreviationcommand';			// ADDED

export default class AbbreviationEditing extends Plugin {
    init() {
        this._defineSchema();
        this._defineConverters();

        this.editor.commands.add(
            'addAbbreviation', new AbbreviationCommand( this.editor )
        );
    }

    // ...
}
</code></pre>
<p>We can now replace the action called on <code>submit</code> with our new command, passing it into editor’s <code>execute()</code> method, along with the abbreviation and title values.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationui.js
// ...

export default class AbbreviationUI extends Plugin {
    // ...

    _createFormView() {
        const editor = this.editor;
        const formView = new FormView( editor.locale );

        // Execute the command after clicking the "Save" button.
        this.listenTo( formView, 'submit', () =&gt; {
            const value = {
                abbr: formView.abbrInputView.fieldView.element.value,
                title: formView.titleInputView.fieldView.element.value
            };
            editor.execute( 'addAbbreviation', value );

            this._hideUI();
        } );

        // ...
    }

    // ...
}
</code></pre>
<p>The command should now work, and pressing the <code>submit</code> button should have the same effect as it did before. We can now explore some additional functionalities. You can check it out now in the CKEditor 5 Inspector.</p>
<p><img src="../../../../assets/img/abbreviation-part3-1.png" data-lightbox="true" alt="Screenshot of the CKEditor 5 inspector showing the ‘addAbbreviation’ command."></p>
<h3 id="refreshing-the-state"><a class="headerlink" href="#refreshing-the-state">#</a> Refreshing the state</h3>
<p>Thanks to the command’s <code>refresh()</code> method, we can observe the state and the value of our command not just when the user presses the button, but whenever any changes are made in the editor. We will use this to check if the user’s selection has an abbreviation model attribute already.</p>
<p>Before we do that, we may want to check if the command can be used at all on a given selection. If the user selects an image, the command should be disabled. Let’s check if our <code>abbreviation</code> attribute is allowed in the schema, using its <code>checkAttributeInSelection()</code> method.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationcommand.js

import Command from '@ckeditor/ckeditor5-core/src/command';

export default class AbbreviationCommand extends Command {
    refresh() {
        const model = this.editor.model;
        const selection = model.document.selection;

        // The command is enabled when the "abbreviation" attribute
        // can be set on the current model selection.
        this.isEnabled = model.schema.checkAttributeInSelection(
            selection, 'abbreviation'
        );
    }

    execute( { title, abbr } ) {
        // ...
    }
}
</code></pre>
<p>We can now check if the selected range is collapsed. If so, we will check if the caret is in an abbreviation, and grab the entire range containing it. We can easily do so using the <a href="../../../../api/module_typing_utils_findattributerange.html#function-findAttributeRange"><code>findAttributeRange</code></a> helper function. We need to pass it the first position of the selection, our attribute name and value, and the model.</p>
<p>Then, we change the value of the command. We will get the abbreviation text using our <code>getRangeText</code> helper function. We also add a range value, which we will use when executing the command.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationcommand.js

import Command from '@ckeditor/ckeditor5-core/src/command';
import findAttributeRange from '@ckeditor/ckeditor5-typing/src/utils/findattributerange'; 	// ADDED
import getRangeText from './utils.js';														// ADDED

export default class AbbreviationCommand extends Command {
    refresh() {
        const model = this.editor.model;
        const selection = model.document.selection;
        const firstRange = selection.getFirstRange();

        // When the selection is collapsed, the command has a value
        // if the caret is in an abbreviation.
        if ( firstRange.isCollapsed ) {
            if ( selection.hasAttribute( 'abbreviation' ) ) {
                const attributeValue = selection.getAttribute( 'abbreviation' );

                // Find the entire range containing the abbreviation
                // under the caret position.
                const abbreviationRange = findAttributeRange(
                    selection.getFirstPosition(), 'abbreviation', attributeValue, model
                );

                this.value = {
                    abbr: getRangeText( abbreviationRange ),
                    title: attributeValue,
                    range: abbreviationRange
                };
            } else {
                this.value = null;
            }
        }

        // ...
    }

    execute( { title, abbr } ) {
        // ...
    }
}
</code></pre>
<p>If the selection is not collapsed, we check if it has the <code>abbreviation</code> model attribute. If so, we will again grab the full range of the abbreviation and compare it with the user selection.</p>
<p>When the user selects a bit of text with the abbreviation attribute, along with a bit without it, we do not want to change the command’s value. So, we will use the <code>containsRange()</code> method to see if the selected range is within the abbreviation range. The second parameter makes it a <code>loose</code> check, meaning the selected range can start, end, or be equal to the abbreviation range.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationcommand.js
//...

export default class AbbreviationCommand extends Command {
    refresh() {
        const model = this.editor.model;
        const selection = model.document.selection;
        const firstRange = selection.getFirstRange();

        if ( firstRange.isCollapsed ) {
            // ...
        }
        // When the selection is not collapsed, the command has a value if the selection
        // contains a subset of a single abbreviation or an entire abbreviation.
        else {
            if ( selection.hasAttribute( 'abbreviation' ) ) {
                const attributeValue = selection.getAttribute( 'abbreviation' );

                // Find the entire range containing the abbreviation
                // under the caret position.
                const abbreviationRange = findAttributeRange(
                    selection.getFirstPosition(), 'abbreviation', attributeValue, model
                );

                if ( abbreviationRange.containsRange( firstRange, true ) ) {
                    this.value = {
                        abbr: getRangeText( firstRange ),
                        title: attributeValue,
                        range: firstRange
                    };
                } else {
                    this.value = null;
                }
            } else {
                this.value = null;
            }
        }

        // ...
    }

    execute( { title, abbr } ) {
        // ...
    }
}
</code></pre>
<p>You can check the command and its current value in the inspector.</p>
<p><img src="../../../../assets/img/abbreviation-part3-2.png" data-lightbox="true" alt="Screenshot of the CKEditor 5 inspector showing the value of the ‘addAbbreviation’ command."></p>
<p>We can now check the command value when the user presses the toolbar abbreviation button, and insert both abbreviation text and title values into the form’s input fields.</p>
<p>In the <code>AbbreviationUI</code> add a simple <code>if</code> statement to fill the form using either the value of the command, or the selected text (as we did before).</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationui.js
// ...

export default class AbbreviationUI extends Plugin {
    // ...

    _showUI() {
        const selection = this.editor.model.document.selection;

        // Check the value of the command.
        const commandValue = this.editor.commands.get( 'addAbbreviation' ).value;

        this._balloon.add( {
            view: this.formView,
            position: this._getBalloonPositionData()
        } );

        // Disable the input when the selection is not collapsed.
        this.formView.abbrInputView.isEnabled = selection.getFirstRange().isCollapsed;

        // Fill the form using the state (value) of the command.
        if ( commandValue ) {
            this.formView.abbrInputView.fieldView.value = commandValue.abbr;
            this.formView.titleInputView.fieldView.value = commandValue.title;
        }
        // If the command has no value, put the currently selected text (not collapsed)
        // in the first field and empty the second in that case.
        else {
            const selectedText = getRangeText( selection.getFirstRange() );

            this.formView.abbrInputView.fieldView.value = selectedText;
            this.formView.titleInputView.fieldView.value = '';
        }

        this.formView.focus();
    }

    // ...
}

</code></pre>
<h3 id="improving-the-execute-method"><a class="headerlink" href="#improving-the-execute-method">#</a> Improving the <code>execute()</code> method</h3>
<p>We should now introduce more cases into our <code>execute()</code> method. For starters, if the user’s selection is not collapsed, we just need to add the abbreviation attribute to their selection instead of inserting the abbreviation text into the model.</p>
<p>So if the selection is not collapsed, we will gather all the ranges, that are allowed to use the <code>abbreviation</code> model attribute, using the schema’s <code>getValidRanges()</code> method. Then we will use the <code>setAttribute()</code>, to add the title value to each of the ranges.</p>
<p>If the selection is collapsed, we will keep our <code>insertContent()</code> model method from before. Then, we need to use <code>removeSelectionAttribute</code> method, to stop adding new content into the abbreviation if the user starts to type.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationcommand.js
// ...

export default class AbbreviationCommand extends Command {
    refresh() {
        // ...
    }

    execute( { abbr, title } ) {
        const model = this.editor.model;
        const selection = model.document.selection;

        model.change( writer =&gt; {
            // If selection is collapsed then update the selected abbreviation
            // or insert a new one at the place of caret.
            if ( selection.isCollapsed ) {
                model.insertContent(
                    writer.createText( abbr, { abbreviation: title } )
                );

                // Remove the "abbreviation" attribute attribute from the selection.
                writer.removeSelectionAttribute( 'abbreviation' );
            } else {
                // If the selection has non-collapsed ranges,
                // change the attribute on nodes inside those ranges
                // omitting nodes where the "abbreviation" attribute is disallowed.
                const ranges = model.schema.getValidRanges(
                    selection.getRanges(), 'abbreviation'
                );

                for ( const range of ranges ) {
                    writer.setAttribute( 'abbreviation', title, range );
                }
            }
        } );
    }
}

</code></pre>
<p>Now we can use the command’s state to check whether the selection is inside an existing abbreviation. If the command’s value is not <code>null</code>, we will grab the whole range, and update its text and title.</p>
<p>We will create a position at the end of the inserted abbreviation, and set a selection there. The <a href="../../../../api/module_engine_model_model-Model.html#function-insertContent"><code>insertContent()</code></a> method returns a range, and we grab its end position to define our <code>positionAfter</code>.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationcommand.js
// ...

export default class AbbreviationCommand extends Command {
    refresh() {
        // ...
    }

    execute( { abbr, title } ) {
        const model = this.editor.model;
        const selection = model.document.selection;

        model.change( writer =&gt; {
            // If selection is collapsed then update the selected abbreviation
            // or insert a new one at the place of caret.
            if ( selection.isCollapsed ) {
                // When a collapsed selection is inside text with the "abbreviation" attribute,
                // update its text and title.
                if ( this.value ) {
                    const { end: positionAfter } = model.insertContent(
                        writer.createText( abbr, { abbreviation: title } ),
                        this.value.range
                    );

                    // Put the selection at the end of the inserted abbreviation.
                    writer.setSelection( positionAfter );
                }

                writer.removeSelectionAttribute( 'abbreviation' );
            } else {
                // ...
            }
        } );
    }
}
</code></pre>
<p>If the collapsed selection is not inside an existing abbreviation, we will insert a text node with the “abbreviation” attribute in place of the caret.</p>
<p>The user might place the abbreviation inside a text, which already has some other model attributes, like “bold” or “italic”. We should first collect them along with our abbreviation attribute, and use the whole list when inserting the abbreviation into the document. We will use our <a href="../../../../api/module_utils_tomap.html#function-toMap"><code>toMap</code></a> helper function to collect all attributes.</p>
<pre class="highlight"><code class="js">// abbreviation/abbreviationcommand.js
// ...
import { toMap } from '@ckeditor/ckeditor5-utils';					// ADDED

export default class AbbreviationCommand extends Command {
    refresh() {
        // ...
    }

    execute( { abbr, title } ) {
        const model = this.editor.model;
        const selection = model.document.selection;

        model.change( writer =&gt; {
            if ( selection.isCollapsed ) {
                if ( this.value ) {
                    // ...
                }
                // If the collapsed selection is not in an existing abbreviation,
                // insert a text node with the "abbreviation" attribute
                // in place of the caret.
                // If the abbreviation is empty, don't do anything.
                else if ( abbr !== '' ) {
                    const firstPosition = selection.getFirstPosition();

                    // Collect all attributes of the user selection.
                    const attributes = toMap( selection.getAttributes() );

                    // Put the new attribute to the map of attributes.
                    attributes.set( 'abbreviation', title );

                    // Inject the new text node with the abbreviation text
                    // with all selection attributes.
                    const { end: positionAfter } = model.insertContent(
                        writer.createText( abbr, attributes ), firstPosition
                    );

                    // Put the selection at the end of the inserted abbreviation.
                    writer.setSelection( positionAfter );
                }

                writer.removeSelectionAttribute( 'abbreviation' );
            } else {
                // ...
            }
        } );
    }
}
</code></pre>
<p>The command is now done, check how it works by trying all our different cases - selection collapsed, not collapsed, inside an existing abbreviation, etc.</p>
<h2 id="demo"><a class="headerlink" href="#demo">#</a> Demo</h2>
<div class="live-snippet"><div id="snippet-abbreviation-plugin">
    <h2>Abbreviation plugin</h2>
    <p>CKEditor 5 is a modern, feature-rich, world-class <abbr title="What You See Is What You Get">WYSIWYG</abbr> editor.</p>
</div>

<style>
	.formatted abbr:hover::before,
	.formatted abbr:hover::after {
		display: none;
	}

	.ck.ck-abbr-form {
		padding: var(--ck-spacing-large);
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		grid-template-rows: repeat(3, 1fr);
		grid-column-gap: 0px;
		grid-row-gap: var(--ck-spacing-standard);
	}

	.ck.ck-abbr-form .ck.ck-labeled-field-view:nth-of-type(1) {
		grid-area: 1 / 1 / 2 / 3;
	}

	.ck.ck-abbr-form .ck.ck-labeled-field-view:nth-of-type(2) {
		grid-area: 2 / 1 / 3 / 3;
	}

	.ck.ck-abbr-form .ck-button:nth-of-type(1) {
		grid-area: 3 / 1 / 4 / 2;
	}

	.ck.ck-abbr-form .ck-button:nth-of-type(2) {
		grid-area: 3 / 2 / 4 / 3;
	}

</style>
</div>
<h2 id="final-code"><a class="headerlink" href="#final-code">#</a> Final code</h2>
<p>If you got lost at any point, this is <a href="https://github.com/ckeditor/ckeditor5-tutorials-examples/tree/main/abbreviation-plugin/part-3">the final implementation of the plugin</a>. You can paste the code from different files into your project, or clone and install the whole thing, and it will run out-of-the-box.</p>
<div class="info-box notice"><p><strong>What’s next?</strong></p><p>That’s it, you’ve finished the tutorial! You are now ready to create your own plugins. If you want to continue learning, move on to our more advanced tutorials, starting with the <a href="../../tutorials/implementing-a-block-widget.html">Implementing a block widget</a> guide.</p></div>

          <div class="info-box notice notice__feedback">
            <p>
              Every day, we work hard to keep our documentation complete. Have you spotted outdated information? Is something missing?
              Please report it via our <a href="https://github.com/ckeditor/ckeditor5/issues/new?labels=squad%3Accx%2Ctype%3Adocs&amp;template=7-docs-issue-community.yml&amp;title=Docs+issue+report+from+%22framework%2Fguides%2Fplugins%2Fabbreviation-plugin%2Fabbreviation-plugin-level-3.html%22&amp;project-version=35.4.0" id="report-widget-issue-tracker">issue tracker</a>.
            </p>
          </div>
          <script>
            ( () => {
                const issueTracker = document.getElementById( 'report-widget-issue-tracker' );
                const hrefUrl = new URL( issueTracker.href );
                hrefUrl.searchParams.set( 'user-agent', navigator.userAgent )
                hrefUrl.searchParams.set( 'origin-url', location.href )
                issueTracker.href = hrefUrl.toString();
            } )();
          </script>
        </div>
      </section>
      <div class="side-navigation">
        <div class="side-navigation__wrapper">
          <nav class="side-navigation__inner">
            <ul class="tree guide-tree">
                          <li><a href="../../../index.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span>
                              </div></a></li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Guides</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                    <li><a href="../../quick-start.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Quick start</span>
                                        </div></a></li>
                                    <li><a href="../../development-tools.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Development tools</span>
                                        </div></a></li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Architecture</span>
                                      </div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="../../architecture/intro.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Introduction</span>
                                                  </div></a></li>
                                              <li><a href="../../architecture/core-editor-architecture.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Core editor architecture</span>
                                                  </div></a></li>
                                              <li><a href="../../architecture/editing-engine.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Editing engine</span>
                                                  </div></a></li>
                                              <li><a href="../../architecture/ui-library.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">UI library</span>
                                                  </div></a></li>
                                      </ul>
                                    </li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Developing custom plugins</span>
                                      </div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="../creating-simple-plugin-timestamp.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Creating a basic plugin</span>
                                                  </div></a></li>
                                              <li>
                                                <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Creating an abbreviation plugin</span>
                                                </div>
                                                <ul class="tree__item-nested-list">
                                                        <li><a href="abbreviation-plugin-level-1.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Creating a toolbar button</span>
                                                            </div></a></li>
                                                        <li><a href="abbreviation-plugin-level-2.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Getting user input with a custom UI</span>
                                                            </div></a></li>
                                                        <li><a href="">
                                                            <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Improving accessibility and adding a command</span>
                                                            </div></a></li>
                                                </ul>
                                              </li>
                                              <li>
                                                <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Package Generator</span>
                                                </div>
                                                <ul class="tree__item-nested-list">
                                                        <li><a href="../package-generator/using-package-generator.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Using package generator</span>
                                                            </div></a></li>
                                                        <li><a href="../package-generator/javascript-package.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">JavaScript package</span>
                                                            </div></a></li>
                                                        <li><a href="../package-generator/typescript-package.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">TypeScript package</span>
                                                            </div></a></li>
                                                </ul>
                                              </li>
                                      </ul>
                                    </li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Advanced tutorials</span>
                                      </div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="../../tutorials/implementing-a-block-widget.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Implementing a block widget</span>
                                                  </div></a></li>
                                              <li><a href="../../tutorials/implementing-an-inline-widget.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Implementing an inline widget</span>
                                                  </div></a></li>
                                              <li><a href="../../tutorials/data-from-external-source.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Data from external source</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                                  </div></a></li>
                                              <li><a href="../../tutorials/using-react-in-a-widget.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Using a React component in a widget</span>
                                                  </div></a></li>
                                      </ul>
                                    </li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Deep dive</span>
                                      </div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="../../deep-dive/clipboard.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Clipboard</span>
                                                  </div></a></li>
                                              <li><a href="../../deep-dive/upload-adapter.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Custom upload adapter</span>
                                                  </div></a></li>
                                              <li><a href="../../deep-dive/event-system.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Event system</span>
                                                  </div></a></li>
                                              <li><a href="../../deep-dive/observables.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Observables</span>
                                                  </div></a></li>
                                              <li><a href="../../deep-dive/schema.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Schema</span>
                                                  </div></a></li>
                                              <li>
                                                <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Conversion</span>
                                                </div>
                                                <ul class="tree__item-nested-list">
                                                        <li><a href="../../deep-dive/conversion/intro.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Introduction</span>
                                                            </div></a></li>
                                                        <li><a href="../../deep-dive/conversion/downcast.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Model to view (downcast)</span>
                                                            </div></a></li>
                                                        <li><a href="../../deep-dive/conversion/upcast.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">View to model (upcast)</span>
                                                            </div></a></li>
                                                        <li>
                                                          <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Conversion helpers</span>
                                                          </div>
                                                          <ul class="tree__item-nested-list">
                                                                  <li><a href="../../deep-dive/conversion/helpers/intro.html">
                                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Introduction</span>
                                                                      </div></a></li>
                                                                  <li><a href="../../deep-dive/conversion/helpers/downcast.html">
                                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Downcast helpers</span>
                                                                      </div></a></li>
                                                                  <li><a href="../../deep-dive/conversion/helpers/upcast.html">
                                                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Upcast helpers</span>
                                                                      </div></a></li>
                                                          </ul>
                                                        </li>
                                                </ul>
                                              </li>
                                              <li>
                                                <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">User interface</span>
                                                </div>
                                                <ul class="tree__item-nested-list">
                                                        <li><a href="../../deep-dive/ui/focus-tracking.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Focus tracking</span>
                                                            </div></a></li>
                                                        <li><a href="../../deep-dive/ui/widget-internals.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Widget internals</span>
                                                            </div></a></li>
                                                        <li><a href="../../deep-dive/ui/theme-customization.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Theme customization</span>
                                                            </div></a></li>
                                                        <li><a href="../../deep-dive/ui/external-ui.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Third–party UI</span>
                                                            </div></a></li>
                                                        <li><a href="../../deep-dive/ui/document-editor.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Document editor</span>
                                                            </div></a></li>
                                                        <li><a href="../../deep-dive/ui/custom-editor-creator.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Creating custom editor</span>
                                                            </div></a></li>
                                                        <li><a href="../../deep-dive/ui/localization.html">
                                                            <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Localization</span>
                                                            </div></a></li>
                                                </ul>
                                              </li>
                                      </ul>
                                    </li>
                                    <li>
                                      <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Contributing</span>
                                      </div>
                                      <ul class="tree__item-nested-list">
                                              <li><a href="../../contributing/contributing.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Contributing</span>
                                                  </div></a></li>
                                              <li><a href="../../contributing/development-environment.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Development environment</span>
                                                  </div></a></li>
                                              <li><a href="../../contributing/testing-environment.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Testing environment</span>
                                                  </div></a></li>
                                              <li><a href="../../contributing/code-style.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Code style</span>
                                                  </div></a></li>
                                              <li><a href="../../contributing/package-metadata.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Package metadata</span>
                                                  </div></a></li>
                                              <li><a href="../../contributing/git-commit-message-convention.html">
                                                  <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Git commit message convention</span>
                                                  </div></a></li>
                                      </ul>
                                    </li>
                            </ul>
                          </li>
            </ul>
          </nav>
        </div>
      </div>
    </main>
    <footer class="footer footer--bordered">
      <p>&copy; 2003-2023 <a href="http://cksource.com">CKSource</a>. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
docsearch({
apiKey:'fc463c26455365ad403d5ec51796cd73',indexName:'ckeditor_nightly',inputSelector:'#docsearch_input',algoliaOptions:{hitsPerPage:250,attributesToRetrieve:'*'},
transformData: function( hits ) {var sortingFn = function( a, b ) {a.custom_ranking = a.custom_ranking || 0;b.custom_ranking = b.custom_ranking || 0;if ( a.custom_ranking === b.custom_ranking ) return a.index - b.index;if ( a.custom_ranking > b.custom_ranking ) return -1;if ( a.custom_ranking < b.custom_ranking ) return 1;};var result = [];var tags = [ 'installation', 'features', 'examples', 'updating', 'support', 'framework', 'api' ];var hitsGrouped = { api: [] };hitsGrouped[ 'framework' ] = hits.filter( function( h ) {return h.tags.includes( 'ckeditor5' ) && h.tags.includes( 'framework' );} ).slice( 0, 7 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn );tags.forEach( function( tag ) {if ( tag !== 'framework' ) {hitsGrouped[ tag ] = hits.filter( function( h ) {return h.tags.includes( 'ckeditor5' ) && h.tags.includes( tag );} ).slice( 0, 10 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn ).slice( 0, 3 );}} );var apiSearchHits = [];if ( window.apiSearch ) apiSearchHits = window.apiSearch();hitsGrouped.api = hitsGrouped.api.filter( function( h ) {var isDuplicated = false;for ( var i = 0; i < apiSearchHits.length; i++ ) {if ( h.url.includes( apiSearchHits[ i ].urlShort ) ) {isDuplicated = true;break;}}return !isDuplicated;} );hitsGrouped.api = ( apiSearchHits || [] ).concat( hitsGrouped.api );result = result.concat( hitsGrouped[ 'framework' ] );tags.forEach( function( tag ) {if ( tag !== 'framework' ) result = result.concat( hitsGrouped[ tag ].slice( 0, 4 ) );} );return result;}
});
</script>
    <script src="../../../../../../assets/2.2.0/scripts/app.js"></script>
    <script src="../../../../assets/snippet.js"></script>
    <script src="../../../../snippets/assets.js"></script>
    <script src="../../../../snippets/framework/abbreviation-level-3/snippet.js"></script>
    <script src="../../../../assets/buildwarningbanner.js" async></script>
  </body>
</html>