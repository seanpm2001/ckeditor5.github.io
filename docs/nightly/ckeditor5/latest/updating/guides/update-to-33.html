<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Update to v33.x - CKEditor 5 Documentation</title>
    <meta name="description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:card" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:site" content="@ckeditor">
    <meta name="x-generated-at" content="Sun Jan 08 2023 03:35:21 GMT+0000 (Coordinated Universal Time)">
    <meta property="og:title" content="Update to v33.x - CKEditor 5 Documentation">
    <meta property="og:description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ckeditor.com/docs/ckeditor5/latest/updating/guides/update-to-33.html">
    <meta property="DC.language" content="en">
    <meta property="DC.publisher" content="CKSource">
    <meta property="DC.creator" content="CKEditor">
    <meta property="DC.title" content="Update to v33.x - CKEditor 5 Documentation">
    <meta property="DC.format" content="text/html">
    <meta property="DC.type" content="Text">
    <meta property="DC.description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <link rel="canonical" href="https://ckeditor.com/docs/ckeditor5/latest/updating/guides/update-to-33.html">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/96x96.png" sizes="96x96">
    <link rel="apple-touch-icon" type="image/png" href="../../assets/img/favicons/200x200.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
    <link rel="stylesheet" href="../../../../assets/2.2.0/css/styles.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../assets/styles.css" type="text/css">
    <script>if ( ["ckeditor5.github.io"].indexOf( location.hostname ) !== -1 ) {
      	function pageView() {
      		ga( 'send', 'pageview', location.pathname + location.search + location.hash );
      	}
      
      	(function( i, s, o, g, r, a, m ) {
      		i[ 'GoogleAnalyticsObject' ] = r;
      		i[ r ] = i[ r ] || function() {
      				(i[ r ].q = i[ r ].q || []).push( arguments )
      			}, i[ r ].l = 1 * new Date();
      		a = s.createElement( o ),
      			m = s.getElementsByTagName( o )[ 0 ];
      		a.async = 1;
      		a.src = g;
      		m.parentNode.insertBefore( a, m )
      	})( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
      
      	ga( 'create', {"trackingId":"UA-271067-19","cookieDomain":"ckeditor5.github.io"} );
      
      	pageView();
      
      	window.addEventListener( 'hashchange', pageView );
      }
    </script>
  <meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <header class="top" data-project="ckeditor5">
      <div class="header__main">
        <div class="header__main-rwd-button"><a href="#"><span></span><span></span><span></span></a></div>
        <div class="header__main-title"><a class="header__main-title-home" href="../../../../index.html">CKEditor Ecosystem Documentation</a></div>
        <div class="top__search">
          <input class="top__search__box" type="text" id="docsearch_input" placeholder="Search in CKEditor 5">
          <div class="top__search__button"><img src="../../../../assets/2.2.0/img/loupe.svg" alt="Search"></div>
        </div>
      </div>
      <div class="header__sub">
        <ul class="top__menu">
          <li class="top__menu-project-logo"><a href="../../index.html">CKEditor 5</a></li>
          <li><a href="../../installation/index.html">Getting started</a></li>
          <li><a href="../../features/index.html">Features</a></li>
          <li><a href="../../examples/index.html">Examples</a></li>
          <li><a class="top__menu__item--active" href="../index.html">Updating</a></li>
          <li><a href="../../support/index.html">Support</a></li>
          <li><a href="../../framework/index.html">Framework</a></li>
          <li><a class="top__menu__api" href="../../api/index.html">API</a></li>
          <li><a class="top__menu-github-link" href="https://github.com/ckeditor/ckeditor5" target="_blank" title="CKEditor 5 on GitHub."><svg viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li>
        </ul>
      </div>
      <div class="header__menu-rwd">
        <ul class="header__menu-rwd__projects">
          <li data-project="ckeditor5"><a href="../../../latest/index.html">CKEditor 5</a>
            <ul class="tree header__menu-rwd__projects-pages">
              <li data-group="installation"><a href="../../installation/index.html">Getting started</a>
              </li>
              <li data-group="features"><a href="../../features/index.html">Features</a>
              </li>
              <li data-group="examples"><a href="../../examples/index.html">Examples</a>
              </li>
              <li data-group="updating"><a href="../index.html">Updating</a>
                <ul class="header__menu-rwd__projects-subpages">
                          <li><a href="../index.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span>
                              </div></a></li>
                          <li><a href="../migration-from-ckeditor-4.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration from CKEditor 4</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                              </div></a></li>
                          <li><a href="../maintaining.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Maintaining your editor</span>
                              </div></a></li>
                          <li><a href="../release-process.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Release process</span>
                              </div></a></li>
                          <li><a href="../versioning-policy.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Versioning policy</span>
                              </div></a></li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Update guides</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                  <li><a href="updating-ckeditor-5.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Updating CKEditor 5</span>
                                      </div></a></li>
                                  <li><a href="changelog.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Recent release changelog</span>
                                      </div></a></li>
                                  <li><a href="update-to-36.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v36.x</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                      </div></a></li>
                                  <li><a href="update-to-35.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v35.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-34.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v34.x</span>
                                      </div></a></li>
                                  <li><a href="">
                                      <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Update to v33.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-32.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v32.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-31.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v31.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-30.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v30.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-29.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v29.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-28.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v28.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-27.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v27.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-26.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v26.x</span>
                                      </div></a></li>
                                  <li><a href="update-to-25.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v25.x</span>
                                      </div></a></li>
                            </ul>
                          </li>
                </ul>
              </li>
              <li data-group="support"><a href="../../support/index.html">Support</a>
              </li>
              <li data-group="framework"><a href="../../framework/index.html">Framework</a>
              </li>
              <li data-group="api-reference"><a href="../../api/index.html">API</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </header>
    <main class="main">
      <section class="main__content formatted">
        <div class="main__content-inner">
          <div class="github-contrib"><a href="https://github.com/ckeditor/ckeditor5/blob/master/docs/updating/update-to-33.md" title="Contribute to this guide"><img src="../../../../assets/2.2.0/img/edit.svg" alt="Contribute to this guide"></a>
          </div>
          <div class="rwd-breadcrumbs"><a href="../../../../index.html">Home</a><span class="rwd-breadcrumbs__separator">/</span><a href="../../index.html">CKEditor 5</a><span class="rwd-breadcrumbs__separator">/</span><a href="../index.html">Updating</a>
          </div>
          <h1 class="main__content-title"><img src="../../../../assets/2.2.0/img/book.svg" alt="guide">Update to CKEditor 5 v33.0.0
          </h1><nav class="secondary-navigation"><h3>Table of contents</h3><ol><li><a href="#important-changes">Important changes</a><ol><li><a href="#new-import-paths-in-the-ckeditor5-list-package">New import paths in the ckeditor5-list package</a></li><li><a href="#additional-dependencies-in-ckeditor-5-collaboration-features">Additional dependencies in CKEditor 5 collaboration features</a></li><li><a href="#mandatory-consumption-of-all-model-items-in-the-downcast-conversion-pipeline">Mandatory consumption of all model items in the downcast conversion pipeline</a></li><li><a href="#the-triggerby-option-in-the-downcast-pipeline-is-now-obsolete">The triggerBy option in the downcast pipeline is now obsolete</a></li><li><a href="#new-downcast-converters-for-the-link-featurestable-table-feature">New downcast converters for the table feature</a></li><li><a href="#responsibility-shift-in-the-lowlevel-downcast-converters">Responsibility shift in the low–level downcast converters</a></li><li><a href="#the-differrefreshitem-method-is-now-obsolete">The Differ#refreshItem() method is now obsolete</a></li><li><a href="#comments-editor-configuration-is-now-required">Comments editor configuration is now required</a></li></ol></li><li><a href="#new-api">New API</a><ol><li><a href="#new-elementtostructure-downcast-helper">New elementToStructure() downcast helper</a></li><li><a href="#new-api-to-trigger-downcast-reconversion">New API to trigger downcast (re)conversion</a></li><li><a href="#improved-api-of-downcastwritercreatecontainerelement">Improved API of DowncastWriter#createContainerElement()</a></li></ol></li></ol></nav>
<div class="info-box notice"><p>When updating your CKEditor 5 installation, make sure <strong>all the packages are the same version</strong> to avoid errors.</p><p>For custom builds, you may try removing the <code>package-lock.json</code> or <code>yarn.lock</code> files (if applicable) and reinstalling all packages before rebuilding the editor. For best results, make sure you use the most recent package versions.</p></div>
<p>For the entire list of changes introduced in version 33.0.0, see the <a href="https://github.com/ckeditor/ckeditor5/blob/master/CHANGELOG.md#3300-2022-03-07">changelog for CKEditor 5 v33.0.0</a>.</p>
<p>Listed below are the most important changes that require your attention when upgrading to CKEditor 5 v33.0.0.</p>
<h2 id="important-changes"><a class="headerlink" href="#important-changes">#</a> Important changes</h2>
<h3 id="new-import-paths-in-the-ckeditor5-list-package"><a class="headerlink" href="#new-import-paths-in-the-ckeditor5-list-package">#</a> New import paths in the <code>ckeditor5-list</code> package</h3>
<p>Starting with v33.0.0, some import paths have changed in the <a href="https://www.npmjs.com/package/@ckeditor/ckeditor5-list"><code>ckeditor5-list</code></a> package. If your application <a href="../../installation/getting-started/installing-plugins.html">imports individual plugins</a> to integrate or build CKEditor 5, you should update the paths accordingly:</p>
<pre class="highlight"><code class="js">// ❌ Old import paths:
import ListEditing from '@ckeditor/ckeditor5-list/src/listediting';
import ListUI from '@ckeditor/ckeditor5-list/src/listui';
import TodoListEditing from '@ckeditor/ckeditor5-list/src/todolistediting';
import ListPropertiesEditing from '@ckeditor/ckeditor5-list/src/listpropertiesediting';

// ✅ New import paths (with subdirectories):
import ListEditing from '@ckeditor/ckeditor5-list/src/list/listediting';
import ListUI from '@ckeditor/ckeditor5-list/src/list/listui';
import TodoListEditing from '@ckeditor/ckeditor5-list/src/todolist/todolistediting';
import ListPropertiesEditing from '@ckeditor/ckeditor5-list/src/listproperties/listpropertiesediting';
</code></pre>
<div class="info-box notice"><p>Please note that <strong>import paths for top-level plugins such as <a href="../../api/module_list_list-List.html"><code>List</code></a>, <a href="../../api/module_list_listproperties-ListProperties.html"><code>ListProperties</code></a>, <a href="../../api/module_list_todolist-TodoList.html"><code>TodoList</code></a>, etc. remain the same</strong>. If you are not sure which import path you should use, you can always <a href="https://github.com/ckeditor/ckeditor5/tree/master/packages/ckeditor5-list/src">browse the GitHub source code</a> that corresponds to the contents of the package on npm.</p></div>
<h3 id="additional-dependencies-in-ckeditor-5-collaboration-features"><a class="headerlink" href="#additional-dependencies-in-ckeditor-5-collaboration-features">#</a> Additional dependencies in CKEditor 5 collaboration features</h3>
<p>The <a href="../../installation/advanced/alternative-setups/dll-builds.html">DLL builds</a> support was introduced for collaboration features. As a result, some imports, plugin requirements and cross-package dependencies have changed to allow for the new building process.</p>
<p>From now on, additional plugins will be required when the following CKEditor 5 collaboration features are added to the editor:</p>
<ul>
<li>
<p><strong><a href="../../api/module_track-changes_trackchanges-TrackChanges.html"><code>TrackChanges</code></a></strong> will also require adding <a href="../../api/module_comments_comments-Comments.html"><code>Comments</code></a> to the list of the editor plugins:</p>
<pre class="highlight"><code class="js">// ❌ Old imports:
import TrackChanges from '@ckeditor/ckeditor5-track-changes/src/trackchanges';
// ✅ New imports:
import TrackChanges from '@ckeditor/ckeditor5-track-changes/src/trackchanges';
import Comments from '@ckeditor/ckeditor5-comments/src/comments';
</code></pre>
</li>
<li>
<p><strong><a href="../../api/module_real-time-collaboration_realtimecollaborativeediting-RealTimeCollaborativeEditing.html"><code>RealTimeCollaborativeEditing</code></a></strong> will also require <a href="../../api/module_cloud-services_cloudservices-CloudServices.html"><code>CloudServices</code></a>:</p>
<pre class="highlight"><code class="js">// ❌ Old imports:
import RealTimeCollaborativeEditing from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativeediting';
// ✅ New imports:
import RealTimeCollaborativeEditing from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativeediting';
import CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';
</code></pre>
</li>
<li>
<p><strong><a href="../../api/module_real-time-collaboration_realtimecollaborativecomments-RealTimeCollaborativeComments.html"><code>RealTimeCollaborativeComments</code></a></strong> will also require <a href="../../api/module_cloud-services_cloudservices-CloudServices.html"><code>CloudServices</code></a> and <a href="../../api/module_comments_comments-Comments.html"><code>Comments</code></a>:</p>
<pre class="highlight"><code class="js">// ❌ Old imports:
import RealTimeCollaborativeComments from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativecomments';
// ✅ New imports:
import RealTimeCollaborativeComments from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativecomments';
import CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';
import Comments from '@ckeditor/ckeditor5-comments/src/comments';
</code></pre>
</li>
<li>
<p><strong><a href="../../api/module_real-time-collaboration_realtimecollaborativetrackchanges-RealTimeCollaborativeTrackChanges.html"><code>RealTimeCollaborativeTrackChanges</code></a></strong> will also require <a href="../../api/module_cloud-services_cloudservices-CloudServices.html"><code>CloudServices</code></a>, <a href="../../api/module_comments_comments-Comments.html"><code>Comments</code></a>, and <a href="../../api/module_track-changes_trackchanges-TrackChanges.html"><code>TrackChanges</code></a>:</p>
<pre class="highlight"><code class="js">// ❌ Old imports:
import RealTimeCollaborativeTrackChanges from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativetrackchanges';
// ✅ New imports:
import RealTimeCollaborativeTrackChanges from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativetrackchanges';
import CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';
import Comments from '@ckeditor/ckeditor5-comments/src/comments';
import TrackChanges from '@ckeditor/ckeditor5-track-changes/src/trackchanges';
</code></pre>
</li>
<li>
<p><strong><a href="../../api/module_real-time-collaboration_realtimecollaborativerevisionhistory-RealTimeCollaborativeRevisionHistory.html"><code>RealTimeCollaborativeRevisionHistory</code></a></strong> will also require <a href="../../api/module_cloud-services_cloudservices-CloudServices.html"><code>CloudServices</code></a>:</p>
<pre class="highlight"><code class="js">// ❌ Old imports:
import RealTimeCollaborativeRevisionHistory from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativerevisionhistory';
// ✅ New imports:
import RealTimeCollaborativeRevisionHistory from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativerevisionhistory';
import CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';
</code></pre>
</li>
<li>
<p><strong><a href="../../api/module_real-time-collaboration_realtimecollaborativecomments_cloudservicescommentsadapter-CloudServicesCommentsAdapter.html"><code>CloudServicesCommentsAdapter</code></a></strong> will also require <a href="../../api/module_cloud-services_cloudservices-CloudServices.html"><code>CloudServices</code></a> and <a href="../../api/module_comments_comments_commentsrepository-CommentsRepository.html"><code>CommentsRepository</code></a>:</p>
<pre class="highlight"><code class="js">// ❌ Old imports:
import CloudServicesCommentsAdapter from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativecomments/cloudservicescommentsadapter';
// ✅ New imports:
import CloudServicesCommentsAdapter from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativecomments/cloudservicescommentsadapter';
import CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';
import CommentsRepository from '@ckeditor/ckeditor5-comments/src/comments/commentsrepository';
</code></pre>
</li>
<li>
<p><strong><a href="../../api/module_real-time-collaboration_realtimecollaborativetrackchanges_cloudservicestrackchangesadapter-CloudServicesTrackChangesAdapter.html"><code>CloudServicesTrackChangesAdapter</code></a></strong> will also require <a href="../../api/module_cloud-services_cloudservices-CloudServices.html"><code>CloudServices</code></a>, <a href="../../api/module_comments_comments_commentsrepository-CommentsRepository.html"><code>CommentsRepository</code></a>, and <a href="../../api/module_track-changes_trackchangesediting-TrackChangesEditing.html"><code>TrackChangesEditing</code></a>:</p>
<pre class="highlight"><code class="js">// ❌ Old imports:
import CloudServicesTrackChangesAdapter from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativetrackchanges/cloudservicestrackchangesadapter';

// ✅ New imports:
import CloudServicesTrackChangesAdapter from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativetrackchanges/cloudservicestrackchangesadapter';
import CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';
import CommentsRepository from '@ckeditor/ckeditor5-comments/src/comments/commentsrepository';
import TrackChangesEditing from '@ckeditor/ckeditor5-track-changes/src/trackchangesediting';
</code></pre>
</li>
<li>
<p><strong><a href="../../api/module_real-time-collaboration_realtimecollaborativerevisionhistory_cloudservicesrevisionhistoryadapter-CloudServicesRevisionHistoryAdapter.html"><code>CloudServicesRevisionHistoryAdapter</code></a></strong> will also require <a href="../../api/module_cloud-services_cloudservices-CloudServices.html"><code>CloudServices</code></a>:</p>
<pre class="highlight"><code class="js">// ❌ Old imports:
import CloudServicesRevisionHistoryAdapter from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativerevisionhistory/cloudservicesrevisionhistoryadapter';

// ✅ New imports:
import CloudServicesRevisionHistoryAdapter from '@ckeditor/ckeditor5-real-time-collaboration/src/realtimecollaborativerevisionhistory/cloudservicesrevisionhistoryadapter';
import CloudServices from '@ckeditor/ckeditor5-cloud-services/src/cloudservices';
</code></pre>
</li>
</ul>
<h3 id="mandatory-consumption-of-all-model-items-in-the-downcast-conversion-pipeline"><a class="headerlink" href="#mandatory-consumption-of-all-model-items-in-the-downcast-conversion-pipeline">#</a> Mandatory consumption of all model items in the downcast conversion pipeline</h3>
<p>Starting with v33.0.0, all <a href="../../api/module_engine_model_item-Item.html">items</a> in the <a href="../../framework/guides/architecture/editing-engine.html#model">model</a> must be consumed in the <a href="../../framework/guides/deep-dive/conversion/downcast.html">downcast conversion</a> pipeline to prevent errors and unpredictable behavior of the editor features. If a model item is not consumed, the <code>conversion-model-consumable-not-consumed</code> error will be thrown. To learn more about the causes of this error and about possible solutions, please refer to the <a href="../../support/error-codes.html#error-conversion-model-consumable-not-consumed">API documentation</a>.</p>
<h3 id="the-triggerby-option-in-the-downcast-pipeline-is-now-obsolete"><a class="headerlink" href="#the-triggerby-option-in-the-downcast-pipeline-is-now-obsolete">#</a> The <code>triggerBy</code> option in the downcast pipeline is now obsolete</h3>
<div class="info-box notice"><p>The v33.0.0 release introduces a massive upgrade to the conversion system. You can find a detailed summary of all these changes in the <a href="https://github.com/ckeditor/ckeditor5/issues/11268#issuecomment-1061655977">developer notes on GitHub</a>.</p></div>
<p>If some of your downcast pipeline converters took advantage of the experimental <code>triggerBy</code> property to trigger (re)conversion upon changes of attributes or children, they need to be updated. For instance:</p>
<pre class="highlight"><code class="js">// ❌ The old conversion using obsolete "triggerBy":
editor.conversion.for( 'downcast' ).elementToElement( {
    model: 'myElement',
    view: ( modelElement, { writer } ) =&gt; {
        return writer.createContainerElement( 'div', {
            'data-owner-id': modelElement.getAttribute( 'ownerId' ),
            class: `my-element my-element-${ modelElement.getAttribute( 'type' ) }`
        } );
    },
    triggerBy: {
        attributes: [ 'ownerId', 'type' ],
        children: 'childModelElement'
    }
} );

// ✅ The new conversion syntax:
editor.conversion.for( 'downcast' ).elementToElement( {
    model: {
        name: 'myElement',
        attributes: [ 'ownerId', 'type' ],
        children: true
    },
    view: ( modelElement, { writer } ) =&gt; {
        // The same converter code.
    }
} );
</code></pre>
<div class="info-box notice"><p>Please note that the new syntax is available both in <a href="../../api/module_engine_conversion_downcasthelpers-DowncastHelpers.html#function-elementToElement"><code>elementToElement</code></a> and <a href="../../api/module_engine_conversion_downcasthelpers-DowncastHelpers.html#function-elementToStructure"><code>elementToStructure</code></a> helpers.</p></div>
<h3 id="new-downcast-converters-for-the-link-featurestable-table-feature"><a class="headerlink" href="#new-downcast-converters-for-the-link-featurestable-table-feature">#</a> New downcast converters for the <a href="../../features/table.html">table feature</a></h3>
<p>The conversion brought by the <a href="../../api/module_table_tableediting-TableEditing.html"><code>TableEditing</code></a> plugin has been refined in this version and now relies heavily on the <a href="../../api/module_engine_conversion_downcasthelpers-DowncastHelpers.html#function-elementToStructure"><code>elementToStructure</code></a> downcast conversion helper.</p>
<p>If your integration extends or overwrites that conversion (the <code>table</code>, <code>tableRow</code>, <code>tableCell</code> model elements and/or their attributes), you might need to undertake some actions to align your custom features with the latest editor API. Please note that the extent of necessary changes may vary depending on how advanced your customizations are.</p>
<h3 id="responsibility-shift-in-the-lowlevel-downcast-converters"><a class="headerlink" href="#responsibility-shift-in-the-lowlevel-downcast-converters">#</a> Responsibility shift in the low–level downcast converters</h3>
<p><a href="../../api/module_engine_conversion_downcastdispatcher-DowncastDispatcher.html">Downcast dispatcher</a> will now fire events for model items no matter if they were <a href="../../api/module_engine_conversion_modelconsumable-ModelConsumable.html#function-consume">consumed</a> or not. This means that the low–level (event–driven) downcast converters listening to these events must first <a href="../../api/module_engine_conversion_viewconsumable-ViewConsumable.html#function-test">test</a> whether the item has already been consumed to prevent double conversion and errors:</p>
<pre class="highlight"><code class="js">editor.conversion.for( 'downcast' ).add( dispatcher =&gt; {
    dispatcher.on( '...', ( evt, data, conversionApi ) =&gt; {
        // Before converting, check whether the change has not been consumed yet.
        if ( !conversionApi.consumable.test( data.item, evt.name ) ) {
            return;
        }

        // Converter code...
    } );
} );
</code></pre>
<p>Also, please keep in mind that starting with CKEditor 5 v33.0.0, all model items <a href="#mandatory-consumption-of-all-model-items-in-the-downcast-conversion-pipeline">must be consumed</a> by your custom converters to prevent further errors.</p>
<h3 id="the-differrefreshitem-method-is-now-obsolete"><a class="headerlink" href="#the-differrefreshitem-method-is-now-obsolete">#</a> The <code>Differ#refreshItem()</code> method is now obsolete</h3>
<p>Please note that <code>Differ#refreshItem()</code> is obsolete and was replaced by <a href="../../api/module_engine_controller_editingcontroller-EditingController.html#function-reconvertItem"><code>reconvertItem</code></a>:</p>
<pre class="highlight"><code class="js">// ❌ Old API:
editor.model.document.differ.refreshItem( ... );

// ✅ New API:
editor.editing.reconvertItem( ... );
</code></pre>
<h3 id="comments-editor-configuration-is-now-required"><a class="headerlink" href="#comments-editor-configuration-is-now-required">#</a> Comments editor configuration is now required</h3>
<p>Since the cross-package dependencies inside the project were removed, the configuration for the comments editor became required. Keep in mind that the editor used in the comments section is also a CKEditor 5 instance and is configured the same way as the regular editor.</p>
<p>After the update, you should configure the comments editor using the <code>config.comments.editorConfig</code> option:</p>
<pre class="highlight"><code class="js">import Autoformat from '@ckeditor/ckeditor5-autoformat/src/autoformat';
import Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';
import Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';
import List from '@ckeditor/ckeditor5-list/src/list';

ClassicEditor.create( document.querySelector( '#editor' ), {
    // ...

    comments: {
        editorConfig: {
            extraPlugins: [ Autoformat, Bold, Italic, List ]
        }
    }
} );
</code></pre>
<div class="info-box notice"><p>Before the change, the comments editor included the <code>Bold</code>, <code>Italic</code>, <code>Autoformat</code> and <code>List</code> plugins.</p><p>If you want to keep the same user experience after updating the editor, you need to configure the comments editor as shown in the example above.</p></div>
<p>If this configuration is not provided, a warning will be logged in the console and the the comments editor will be initialized with the most basic features, that is just typing, paragraph and undo features.</p>
<p>To hide the warning (and use the basic configuration), provide an empty configuration for the comments editor:</p>
<pre class="highlight"><code class="js">ClassicEditor.create( document.querySelector( '#editor' ), {
    // ...

    comments: {
        editorConfig: {}
    }
} );
</code></pre>
<h2 id="new-api"><a class="headerlink" href="#new-api">#</a> New API</h2>
<h3 id="new-elementtostructure-downcast-helper"><a class="headerlink" href="#new-elementtostructure-downcast-helper">#</a> New <code>elementToStructure()</code> downcast helper</h3>
<p>The new <a href="../../api/module_engine_conversion_downcasthelpers-DowncastHelpers.html#function-elementToStructure"><code>elementToStructure</code></a> helper was introduced to streamline downcast conversion to complex view structures. Unlike <a href="../../api/module_engine_conversion_downcasthelpers-DowncastHelpers.html#function-elementToElement"><code>elementToElement</code></a>, it allows placing children of an element in configurable slots in the view structure without the need to develop complex converters using low–level event–driven API.</p>
<p>To learn more about this new helper, please refer to the <a href="../../api/module_engine_conversion_downcasthelpers-DowncastHelpers.html#function-elementToStructure">API documentation</a> or check out the <a href="../../framework/guides/deep-dive/conversion/downcast.html#converting-element-to-structure">official conversion guide</a> with plenty of examples and details.</p>
<h3 id="new-api-to-trigger-downcast-reconversion"><a class="headerlink" href="#new-api-to-trigger-downcast-reconversion">#</a> New API to trigger downcast (re)conversion</h3>
<p>The <a href="#the-triggerby-option-in-the-downcast-pipeline-is-now-obsolete"><code>triggerBy</code> property is obsolete</a> and a new API was created to trigger downcast conversion of a model element upon changes to its attributes or children (also known as <em>reconversion</em>):</p>
<pre class="highlight"><code class="js">editor.conversion.for( 'downcast' ).elementToElement( {
    model: {
        name: 'myElement',

        // Changes to these attributes will (re)convert myElement.
        attributes: [ 'ownerId', 'type' ],

        // If some children are added or removed, myElement will be (re)converted.
        children: true
    },
    view: ( modelElement, { writer } ) =&gt; {
        // ...
    }
} );
</code></pre>
<p>The new syntax of the <code>model</code> property is available in the <a href="../../api/module_engine_conversion_downcasthelpers-DowncastHelpers.html#function-elementToElement"><code>elementToElement</code></a> and <a href="../../api/module_engine_conversion_downcasthelpers-DowncastHelpers.html#function-elementToStructure"><code>elementToStructure</code></a> helpers. Please refer to the respective API documentation for more details.</p>
<h3 id="improved-api-of-downcastwritercreatecontainerelement"><a class="headerlink" href="#improved-api-of-downcastwritercreatecontainerelement">#</a> Improved API of <code>DowncastWriter#createContainerElement()</code></h3>
<p>Starting from v33.0.0, you can specify the children of a container element directly in the <a href="../../api/module_engine_view_downcastwriter-DowncastWriter.html#function-createContainerElement"><code>createContainerElement</code></a> method:</p>
<pre class="highlight"><code class="js">// ❌ Old API:
const element = writer.createContainerElement( 'p', { id: '1234' } );

writer.insert( writer.createPositionAt( element, 0 ), childElementA );
writer.insert( writer.createPositionAt( element, 1 ), childElementB );
// ...

// ✅ New API:
writer.createContainerElement( 'p', { id: '1234' }, [
    childElementA,
    childElementB,

    // ...
] );
</code></pre>

          <div class="info-box notice notice__feedback">
            <p>
              Every day, we work hard to keep our documentation complete. Have you spotted outdated information? Is something missing?
              Please report it via our <a href="https://github.com/ckeditor/ckeditor5/issues/new?labels=squad%3Accx%2Ctype%3Adocs&amp;template=7-docs-issue-community.yml&amp;title=Docs+issue+report+from+%22updating%2Fguides%2Fupdate-to-33.html%22&amp;project-version=35.4.0" id="report-widget-issue-tracker">issue tracker</a>.
            </p>
          </div>
          <script>
            ( () => {
                const issueTracker = document.getElementById( 'report-widget-issue-tracker' );
                const hrefUrl = new URL( issueTracker.href );
                hrefUrl.searchParams.set( 'user-agent', navigator.userAgent )
                hrefUrl.searchParams.set( 'origin-url', location.href )
                issueTracker.href = hrefUrl.toString();
            } )();
          </script>
        </div>
      </section>
      <div class="side-navigation">
        <div class="side-navigation__wrapper">
          <nav class="side-navigation__inner">
            <ul class="tree guide-tree">
                          <li><a href="../index.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Overview</span>
                              </div></a></li>
                          <li><a href="../migration-from-ckeditor-4.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Migration from CKEditor 4</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                              </div></a></li>
                          <li><a href="../maintaining.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Maintaining your editor</span>
                              </div></a></li>
                          <li><a href="../release-process.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Release process</span>
                              </div></a></li>
                          <li><a href="../versioning-policy.html">
                              <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Versioning policy</span>
                              </div></a></li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Update guides</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                    <li><a href="updating-ckeditor-5.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Updating CKEditor 5</span>
                                        </div></a></li>
                                    <li><a href="changelog.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Recent release changelog</span>
                                        </div></a></li>
                                    <li><a href="update-to-36.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v36.x</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                        </div></a></li>
                                    <li><a href="update-to-35.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v35.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-34.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v34.x</span>
                                        </div></a></li>
                                    <li><a href="">
                                        <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Update to v33.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-32.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v32.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-31.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v31.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-30.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v30.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-29.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v29.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-28.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v28.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-27.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v27.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-26.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v26.x</span>
                                        </div></a></li>
                                    <li><a href="update-to-25.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Update to v25.x</span>
                                        </div></a></li>
                            </ul>
                          </li>
            </ul>
          </nav>
        </div>
      </div>
    </main>
    <footer class="footer footer--bordered">
      <p>&copy; 2003-2023 <a href="http://cksource.com">CKSource</a>. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
docsearch({
apiKey:'fc463c26455365ad403d5ec51796cd73',indexName:'ckeditor_nightly',inputSelector:'#docsearch_input',algoliaOptions:{hitsPerPage:250,attributesToRetrieve:'*'},
transformData: function( hits ) {var sortingFn = function( a, b ) {a.custom_ranking = a.custom_ranking || 0;b.custom_ranking = b.custom_ranking || 0;if ( a.custom_ranking === b.custom_ranking ) return a.index - b.index;if ( a.custom_ranking > b.custom_ranking ) return -1;if ( a.custom_ranking < b.custom_ranking ) return 1;};var result = [];var tags = [ 'installation', 'features', 'examples', 'updating', 'support', 'framework', 'api' ];var hitsGrouped = { api: [] };hitsGrouped[ 'updating' ] = hits.filter( function( h ) {return h.tags.includes( 'ckeditor5' ) && h.tags.includes( 'updating' );} ).slice( 0, 7 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn );tags.forEach( function( tag ) {if ( tag !== 'updating' ) {hitsGrouped[ tag ] = hits.filter( function( h ) {return h.tags.includes( 'ckeditor5' ) && h.tags.includes( tag );} ).slice( 0, 10 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn ).slice( 0, 3 );}} );var apiSearchHits = [];if ( window.apiSearch ) apiSearchHits = window.apiSearch();hitsGrouped.api = hitsGrouped.api.filter( function( h ) {var isDuplicated = false;for ( var i = 0; i < apiSearchHits.length; i++ ) {if ( h.url.includes( apiSearchHits[ i ].urlShort ) ) {isDuplicated = true;break;}}return !isDuplicated;} );hitsGrouped.api = ( apiSearchHits || [] ).concat( hitsGrouped.api );result = result.concat( hitsGrouped[ 'updating' ] );tags.forEach( function( tag ) {if ( tag !== 'updating' ) result = result.concat( hitsGrouped[ tag ].slice( 0, 4 ) );} );return result;}
});
</script>
    <script src="../../../../assets/2.2.0/scripts/app.js"></script>
    <script src="../../assets/buildwarningbanner.js" async></script>
  </body>
</html>